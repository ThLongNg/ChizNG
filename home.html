<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>About Me</title>
  <link rel="icon" href="https://cdn.discordapp.com/emojis/1313856298240053268.webp?size=128" />
  <link rel="stylesheet" href="index.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Kaisei+Tokumin&family=Prata&display=swap"
    rel="stylesheet" />
  <script src="character-details-helper.js" defer></script>
  <script src="character-detail-view.js" defer></script>
  <script src="character-detail-ingame-ui.js" defer></script>
  <script src="character-popup.js" defer></script>
  <script src="script.js" defer></script>
</head>

<body>
  <div id="music-container">
    <img id="cd-disk" src="https://i1.sndcdn.com/artworks-dSGst2JiG69GhP9e-2Dw1bQ-t500x500.jpg" alt="Album Cover" />
    <audio id="background-music" crossorigin="anonymous"></audio>
  </div>

  <div id="song-info-box" class="hidden">
    <p id="song-name"></p>
  </div>

<p id="dynamic-greeting"></p> 

<h1>This is my Personal Profile</h1>
  <div class="char-container" id="chizuru-glitch"></div>

  <!-- Featured Song Section -->
  <section class="info-card">

<iframe data-testid="embed-iframe" style="border-radius:12px" src="https://open.spotify.com/embed/track/6efouvscdEILOB0bpJB8GM?utm_source=generator" width="100%" height="152" frameBorder="0" allowfullscreen="" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy"></iframe>
  </section>

  <section class="info-card">
    <h2>Full Name: Nguy·ªÖn Th√†nh Long</h2>

    <h3>„Ç∞„Ç®„É≥„Éª„Çø„Ç§„É≥„Éª„É≠„É≥</h3>
    <p>--- Studied at: <a href="https://www.facebook.com/FPTU.HCM">FPT University HCM</a> ---</p>
    <p>Birth Date: 07/10/2005</p>
    <p>Address: Long Thanh My, TP Thu Duc, TP HCM</p>
    <p>Phone Num: +84399092828</p>
  </section>

  <section class="info-card">
    <h2>Contact Me At:</h2>
    <ul class="contact-list">
      <li><strong>Facebook:</strong> <a href="https://www.facebook.com/long.nguyen.07102005">Nguy·ªÖn Th√†nh Long</a></li>
      <li><strong>Discord:</strong> chiznguyen71</li>
      <li><strong>Gmail:</strong> <a href="mailto:longnguyenthanh0710@gmail.com">Click here to email me!</a></li>
      <li><strong>Github:</strong> <a href="https://github.com/ThLongNg">ThLongNg</a></li>
    </ul>
  </section>

  <section class="info-card">
    <h2>My Biography</h2>
    <p>Hello! My name is Nguy·ªÖn Th√†nh Long, and I am currently a student at FPT University in Ho Chi Minh City. I have a
      strong enthusiasm for technology and coding, which drives me to continuously learn and grow in these fields. I
      enjoy tackling challenges and developing projects that can provide value to others. In my free time, I actively
      seek out new hobbies, and I find inspiration in listening to music and playing video games, which help me unwind
      and foster my creativity.</p>
  </section>
<section class="info-card github-calendar-section" style="padding-bottom: 30px;">
  <h2>GitHub Contribution Graph</h2>

  <a href="https://github.com/ThLongNg" target="_blank">
    <img 
      id="github-graph"
      src="https://ghchart.rshah.org/c71585/ThLongNg" 
      alt="GitHub Contribution Graph" 
      style="width: 100%; max-width: 650px; padding-top: 15px;"
    />
  </a>

  <p style="font-size: 0.8rem; opacity: 0.7; margin-top: 20px;">
    Nh·∫•n v√†o b·∫£ng ƒë·ªÉ xem chi ti·∫øt tr√™n GitHub
  </p>
</section>
  <!-- Honkai Star Rail API Section -->
  <section class="info-card hsr-section">
    <h2>Honkai Star Rail Info</h2>

    <div id="loading-indicator" class="hidden">
      <div class="loading-spinner"></div>
      <p>ƒêang t·∫£i th√¥ng tin...</p>
    </div>

    <div id="error-message" class="hidden error-box">
      <p id="error-text"></p>
    </div>

    <div id="hsr-player-info" class="hidden">
      <div class="player-basic-info">
        <div class="player-layout-container">
          <div class="player-left">
            <img id="player-avatar" src="" alt="Player Avatar" class="player-avatar" />
            <div class="player-main-info">
              <h3 id="player-nickname"></h3>
              <div class="player-level-info">
                <span class="level-text">TL <span id="player-level"></span></span>
                <span class="eq-text">EQ <span id="world-level"></span></span>
              </div>
              <p class="player-signature" id="player-signature"></p>
            </div>
          </div>

          <div class="player-right">
            <div class="achievement-info">
              <span class="achievement-number" id="achievement-count"></span>
              <div class="achievement-icon">üèÜ</div>
              <span class="achievement-text">Total Achievements</span>
            </div>
            <div class="simulated-universe-info">
              <span class="su-number">9</span>
              <div class="su-icon">üî∫</div>
              <span class="su-text">Simulated Universe</span>
            </div>
            <div class="uid-info">
              <span class="uid-text">UID: <span id="player-uid"></span></span>
            </div>
          </div>
        </div>
      </div>

      <!-- View Characters Button (enhanced with loading state) -->
      <div style="text-align:center; margin-top:18px;">
        <button id="view-characters-btn-home" class="view-chars-btn" disabled title="Loading character data...">
          <span class="btn-icon">üé≠</span>
          <span class="btn-text">View Characters</span>
          <span class="btn-spinner"></span>
        </button>
      </div>

      <style>
        .view-chars-btn {
          background: linear-gradient(135deg, #4a5fc1 0%, #7b42f6 100%);
          border: 2px solid rgba(255, 215, 0, 0.5);
          color: white;
          padding: 12px 22px;
          font-size: 15px;
          font-weight: 700;
          border-radius: 22px;
          cursor: pointer;
          display: inline-flex;
          align-items: center;
          gap: 8px;
          box-shadow: 0 6px 24px rgba(123, 66, 246, 0.28);
          transition: all 0.3s ease;
          position: relative;
          overflow: hidden;
        }

        .view-chars-btn:hover:not(:disabled) {
          transform: translateY(-2px);
          box-shadow: 0 8px 32px rgba(123, 66, 246, 0.45);
          border-color: rgba(255, 215, 0, 0.8);
        }

        .view-chars-btn:active:not(:disabled) {
          transform: translateY(0);
        }

        .view-chars-btn:disabled {
          background: linear-gradient(135deg, #3a4880 0%, #5a32a0 100%);
          cursor: not-allowed;
          opacity: 0.7;
        }

        .btn-icon {
          font-size: 18px;
          transition: transform 0.3s ease;
        }

        .view-chars-btn:hover:not(:disabled) .btn-icon {
          transform: scale(1.1) rotate(5deg);
        }

        .btn-text {
          display: inline-block;
        }

        .btn-spinner {
          display: none;
          width: 14px;
          height: 14px;
          border: 2px solid rgba(255, 255, 255, 0.3);
          border-top-color: white;
          border-radius: 50%;
          animation: spin 0.8s linear infinite;
          margin-left: 4px;
        }

        .view-chars-btn:disabled .btn-spinner {
          display: inline-block;
        }

        @keyframes spin {
          to { transform: rotate(360deg); }
        }

        /* Tooltip enhancement */
        .view-chars-btn::after {
          content: attr(title);
          position: absolute;
          bottom: 110%;
          left: 50%;
          transform: translateX(-50%) translateY(5px);
          background: rgba(0, 0, 0, 0.9);
          color: white;
          padding: 6px 12px;
          border-radius: 6px;
          font-size: 12px;
          white-space: nowrap;
          opacity: 0;
          pointer-events: none;
          transition: opacity 0.3s ease, transform 0.3s ease;
          z-index: 1000;
        }

        .view-chars-btn:hover::after {
          opacity: 1;
          transform: translateX(-50%) translateY(0);
        }
      </style>

      <div class="characters-showcase">

        <div id="characters-list" class="characters-grid">
          <!-- Characters will be populated here -->
        </div>
      </div>
    </div>
  </section>

  <!-- My Spotify Profile Section -->
  <section class="info-card spotify-profile-section">
    <h2>üéß My Spotify Profile</h2>
    <div class="spotify-profile-card">
      <div class="spotify-profile-info">
        <div class="spotify-avatar">
          <svg width="256px" height="256px" viewBox="0 0 256 256" version="1.1" xmlns="http://www.w3.org/2000/svg"
            xmlns:xlink="http://www.w3.org/1999/xlink" preserveAspectRatio="xMidYMid">
            <title>Spotify</title>
            <g>
              <path
                d="M127.999236,0 C57.3087105,0 0,57.3085507 0,128.000764 C0,198.696035 57.3087105,256 127.999236,256 C198.697403,256 256,198.696035 256,128.000764 C256,57.3131363 198.697403,0.00611405337 127.997707,0.00611405337 L127.999236,0 Z M186.69886,184.613841 C184.406145,188.373984 179.48445,189.566225 175.724397,187.258169 C145.671485,168.900724 107.838626,164.743168 63.2835265,174.923067 C58.990035,175.901315 54.7102999,173.211132 53.7320747,168.916009 C52.7492641,164.620887 55.428684,160.34105 59.7328748,159.362801 C108.491286,148.222996 150.314998,153.019471 184.054595,173.639116 C187.814648,175.947171 189.00686,180.853699 186.69886,184.613841 L186.69886,184.613841 Z M202.365748,149.76068 C199.476927,154.456273 193.33245,155.938931 188.640026,153.050041 C154.234012,131.90153 101.787386,125.776777 61.0916907,138.130222 C55.8138602,139.724462 50.2395052,136.749975 48.6376614,131.481189 C47.0480455,126.203233 50.0239899,120.639444 55.2926496,119.034505 C101.778216,104.929384 159.568396,111.761839 199.079523,136.042273 C203.771946,138.931163 205.254569,145.075787 202.365748,149.762209 L202.365748,149.76068 Z M203.710807,113.467659 C162.457218,88.964062 94.394144,86.7110334 55.0068244,98.6655362 C48.6819873,100.58382 41.9933726,97.0132133 40.0766627,90.6882251 C38.1599527,84.3601798 41.7274177,77.675991 48.0568402,75.7531212 C93.2707135,62.0270714 168.433562,64.6790421 215.929451,92.8755277 C221.63067,96.2520136 223.495412,103.599577 220.117478,109.281061 C216.754829,114.970188 209.38757,116.845674 203.716921,113.467659 L203.710807,113.467659 Z"
                fill="#1ED760" />
            </g>
          </svg>
        </div>
        <div class="spotify-details">
          <h3>ChizNguyen</h3>
          <p class="spotify-username">@NguyenThanhLong</p>
          <p class="spotify-bio">üéµ Music enthusiast | üéÆ Gamer | üíª Developer</p>
          <a href="https://open.spotify.com/user/31kyh2opotdtof36smvsyrx66rdy?si=41576a9683ac443b" target="_blank"
            class="spotify-profile-btn">
            <svg width="16" height="16" viewBox="0 0 256 256" xmlns="http://www.w3.org/2000/svg"
              preserveAspectRatio="xMidYMid">
              <path
                d="M127.999236,0 C57.3087105,0 0,57.3085507 0,128.000764 C0,198.696035 57.3087105,256 127.999236,256 C198.697403,256 256,198.696035 256,128.000764 C256,57.3131363 198.697403,0.00611405337 127.997707,0.00611405337 L127.999236,0 Z M186.69886,184.613841 C184.406145,188.373984 179.48445,189.566225 175.724397,187.258169 C145.671485,168.900724 107.838626,164.743168 63.2835265,174.923067 C58.990035,175.901315 54.7102999,173.211132 53.7320747,168.916009 C52.7492641,164.620887 55.428684,160.34105 59.7328748,159.362801 C108.491286,148.222996 150.314998,153.019471 184.054595,173.639116 C187.814648,175.947171 189.00686,180.853699 186.69886,184.613841 L186.69886,184.613841 Z M202.365748,149.76068 C199.476927,154.456273 193.33245,155.938931 188.640026,153.050041 C154.234012,131.90153 101.787386,125.776777 61.0916907,138.130222 C55.8138602,139.724462 50.2395052,136.749975 48.6376614,131.481189 C47.0480455,126.203233 50.0239899,120.639444 55.2926496,119.034505 C101.778216,104.929384 159.568396,111.761839 199.079523,136.042273 C203.771946,138.931163 205.254569,145.075787 202.365748,149.762209 L202.365748,149.76068 Z M203.710807,113.467659 C162.457218,88.964062 94.394144,86.7110334 55.0068244,98.6655362 C48.6819873,100.58382 41.9933726,97.0132133 40.0766627,90.6882251 C38.1599527,84.3601798 41.7274177,77.675991 48.0568402,75.7531212 C93.2707135,62.0270714 168.433562,64.6790421 215.929451,92.8755277 C221.63067,96.2520136 223.495412,103.599577 220.117478,109.281061 C216.754829,114.970188 209.38757,116.845674 203.716921,113.467659 L203.710807,113.467659 Z"
                fill="#FFFFFF" />
            </svg>
            Visit My Spotify Profile
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Featured Spotify Playlists Section -->
  <section class="info-card featured-playlists-section">
    <h2>üé∂ Featured Playlists</h2>

    <div class="embedded-playlists">
      <div class="playlist-embed">
        <iframe data-testid="embed-iframe" style="border-radius:12px"
          src="https://open.spotify.com/embed/playlist/50peNK1HB3HCCEWfC6nmWB?utm_source=generator" width="100%"
          height="352" frameBorder="0" allowfullscreen=""
          allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy">
        </iframe>
      </div>

      <div class="playlist-embed">
        <iframe data-testid="embed-iframe" style="border-radius:12px"
          src="https://open.spotify.com/embed/playlist/4zVuENJGDW2qCLJpXHgyhd?utm_source=generator" width="100%"
          height="352" frameBorder="0" allowfullscreen=""
          allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture" loading="lazy">
        </iframe>
      </div>
    </div>
  </section>


  <!-- Static decorative images -->
  <!-- Replaced images per user request -->
  <img class="image image1"
    src="https://starrail.honeyhunterworld.com/img/eidolon/please-write-on-with-a-smile-eidolon_icon.webp"
    alt="Image 1 " />
  <img class="image image2"
    src="https://shop.ldrescdn.com/rms/ld-space/process/img/743c321c5972482590721bc9b7cee6821758792367.webp?1758792373043&x-oss-process=image/format,webp"
    alt="Image 2" />
  <img class="image image3"
    src="https://shop.ldrescdn.com/rms/ld-space/process/img/3fa2ba6995114da0a18c718bc1fe23851758792367.webp?1758792373020&x-oss-process=image/format,webp"
    alt="Image 3" />
  <img class="image image4"
    src="https://starrail.honeyhunterworld.com/img/eidolon/a-tomorrow-in-thirteen-shades-eidolon_icon.webp"
    alt="Image 4 " />
  <img class="i5"
    src="https://upload-os-bbs.hoyolab.com/upload/2024/06/03/29532825/27691a14f88b2c53ad6e4ed06b348002_3742389950389271120.png?x-oss-process=image%2Fresize%2Cs_1000%2Fauto-orient%2C0%2Finterlace%2C1%2Fformat%2Cwebp%2Fquality%2Cq_70"
    alt="Image 5" />
  <script>
    // Define global functions IMMEDIATELY (before any deferred scripts run)
    // This ensures script.js can call these functions even before DOM is ready
    
    let _buttonElement = null;
    let _isDataReady = false;
    let _characterCount = 0;
    let _checkInterval = null;

    // Global function - callable immediately
    window.enableCharacterViewButton = function(count) {
      console.log('üéØ enableCharacterViewButton called with count:', count);
      _isDataReady = true;
      _characterCount = count || 0;
      
      if (_buttonElement) {
        // Button already initialized - update it
        _buttonElement.disabled = false;
        _buttonElement.title = `Click to view ${_characterCount} character${_characterCount !== 1 ? 's' : ''}`;
        if (_checkInterval) {
          clearInterval(_checkInterval);
          _checkInterval = null;
        }
        console.log('‚úÖ Button enabled immediately with', _characterCount, 'characters');
      } else {
        // Button not yet initialized - data will be applied when DOM is ready
        console.log('üìå Button not ready yet, data stored for later application');
      }
    };

    window.updateCharacterButtonState = function(state, message) {
      console.log('üéØ updateCharacterButtonState called:', state, message);
      
      if (!_buttonElement) {
        console.log('üìå Button not ready yet, state update queued');
        return;
      }

      if (state === 'loading') {
        _buttonElement.disabled = true;
        _buttonElement.title = message || 'Loading character data...';
      } else if (state === 'error') {
        _buttonElement.disabled = true;
        _buttonElement.title = message || 'Failed to load character data';
        const btnText = _buttonElement.querySelector('.btn-text');
        if (btnText) btnText.textContent = 'Data Unavailable';
        if (_checkInterval) {
          clearInterval(_checkInterval);
          _checkInterval = null;
        }
      } else if (state === 'ready') {
        _isDataReady = true;
        _buttonElement.disabled = false;
        _buttonElement.title = message || 'Click to view characters';
        if (_checkInterval) {
          clearInterval(_checkInterval);
          _checkInterval = null;
        }
      }
    };

    // Initialize button when DOM is ready
    document.addEventListener('DOMContentLoaded', function() {
      console.log('‚úÖ DOM ready, initializing button manager');
      
      _buttonElement = document.getElementById('view-characters-btn-home');
      if (!_buttonElement) {
        console.error('‚ùå View characters button not found in DOM');
        return;
      }

      // If data was already loaded before DOM was ready, apply it now
      if (_isDataReady && _characterCount > 0) {
        console.log('‚úÖ Applying pre-loaded data:', _characterCount, 'characters');
        _buttonElement.disabled = false;
        _buttonElement.title = `Click to view ${_characterCount} character${_characterCount !== 1 ? 's' : ''}`;
      } else {
        // Start auto-check interval
        console.log('üîÑ Starting auto-check interval');
        _checkInterval = setInterval(() => {
          if (window.characterPopup && window.characterPopup.characterData && 
              window.characterPopup.characterData.length > 0) {
            const count = window.characterPopup.characterData.length;
            console.log('‚úÖ Auto-detected character data:', count, 'characters');
            window.enableCharacterViewButton(count);
          }
        }, 1000);

        // Auto-enable after 15 seconds as fallback
        setTimeout(() => {
          if (!_isDataReady) {
            console.log('‚è∞ 15-second timeout reached');
            if (window.characterPopup && window.characterPopup.characterData && 
                window.characterPopup.characterData.length > 0) {
              window.enableCharacterViewButton(window.characterPopup.characterData.length);
            } else {
              console.log('‚ö†Ô∏è No data found, enabling button anyway');
              _buttonElement.disabled = false;
              _buttonElement.title = 'Click to try viewing characters';
              if (_checkInterval) {
                clearInterval(_checkInterval);
                _checkInterval = null;
              }
            }
          }
        }, 15000);
      }

      // Click handler
      _buttonElement.addEventListener('click', () => {
        console.log('üñ±Ô∏è Button clicked');
        console.log('üîç Checking: window.characterPopup exists?', !!window.characterPopup);
        console.log('üîç Checking: characterPopup.show exists?', window.characterPopup ? typeof window.characterPopup.show : 'N/A');
        console.log('üîç Checking: characterPopup.characterData length?', window.characterPopup?.characterData?.length || 0);
        
        if (window.characterPopup && typeof window.characterPopup.show === 'function') {
          console.log('‚úÖ Opening character popup');
          try {
            window.characterPopup.show();
          } catch (err) {
            console.error('‚ùå Error showing character popup:', err);
            _buttonElement.style.animation = 'shake 0.5s';
            setTimeout(() => { _buttonElement.style.animation = ''; }, 500);
          }
          return;
        }

        console.warn('‚ö†Ô∏è Character popup not available');
        _buttonElement.style.animation = 'shake 0.5s';
        setTimeout(() => { _buttonElement.style.animation = ''; }, 500);
      });

      // Add shake animation CSS
      const style = document.createElement('style');
      style.textContent = `
        @keyframes shake {
          0%, 100% { transform: translateX(0); }
          25% { transform: translateX(-5px); }
          75% { transform: translateX(5px); }
        }
      `;
      document.head.appendChild(style);
    });
  </script>
</body>

</html>
